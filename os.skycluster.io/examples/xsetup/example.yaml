apiVersion: os.skycluster.io/v1alpha1
kind: XSetup
metadata:
  name: example
  labels:
    skycluster.io/managed-by: "skycluster"
    skycluster.io/provider-platform: openstack
    skycluster.io/provider-region: SCINET
    skycluster.io/provider-zone: default
spec:
  vpcCidr: 10.120.0.0/16
  publicKey: |
    ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEArD1z...
  gateway:
    image: 2vCPU-4GB
    flavor: TBD
    volumeType: gp2
    volumeSize: 20
    userData : |
      #!/bin/bash
      echo "Initializing gateway..."
  # Subnet CIDRs should be within the VPC CIDR range
  subnets:
    - type: public
      zone: a
      cidr: 10.120.30.0/24
      gatewayIp: 10.120.30.1
      default: true # only applicatable for GCP
      # if default is true, the first half of the VPC CIDR will be used for pods, 
      # the second half for services is divided into two quarters
      # and the third quarter will be used for services.
      # the fourth quarter will be used for other resources in the subnet.
      # Take a look at the composition for more details.
  providerRef:
    platform: gcp
    region: us-east1
    zones: 
      primary: a
      secondary: b
#     name: example-provider
status:
  log: "Setup created successfully."
  keypair:
    name: example-keypair
    id: example-keypair-id
  vpc:
    id: vpc-12345678
    cidrBlock: "10.20.30.0/16"
  subnets:
    - type: public
      id: subnet-12345678
      cidrBlock: "10.20.30.0/24"
  gateway:
    publicIp: "<public-ip>"
    privateIp: "<private-ip>"